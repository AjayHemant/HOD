<!DOCTYPE html><html>
<head>
    <title>Flappy Bird - Web Version</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body {
            margin: 0;
            background: #000;
            overflow: hidden;
            touch-action: manipulation;
        }
        #gameArea {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
        }
        .bird {
            position: absolute;
            width: 68px;
            height: 48px;
            background-image: url('bird.png');
            background-size: cover;
        }
        .pipe {
            position: absolute;
            width: 80px;
            background-image: url('pillar.png');
            background-size: cover;
        }
        #scoreDisplay {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            color: white;
            text-shadow: 2px 2px 0 black;
        }
    </style>
</head>
<body>
    <div id="gameArea"></div>
    <div id="scoreDisplay">0</div><script>
    const gameArea = document.getElementById("gameArea");
    const scoreDisplay = document.getElementById("scoreDisplay");

    // AUDIO
    const music = new Audio('background.mp3');
    music.loop = true;
    const flapSound = new Audio('flap.ogg');
    const scoreSound = new Audio('score.ogg');
    const dieSound = new Audio('die.ogg');

    // Bird
    const bird = document.createElement("div");
    bird.classList.add("bird");
    gameArea.appendChild(bird);

    let birdY = 200;
    let birdSpeed = 0;
    const gravity = 0.3;
    const flapStrength = -7;

    // Game state
    let score = 0;
    let gameOver = false;
    let started = false;

    // Pipes
    let pipes = [];
    const gap = 200;
    const pipeSpeed = 3;

    function startGame() {
        if (!started) {
            music.currentTime = 0;
            music.play();
            started = true;
        }
        birdSpeed = flapStrength;
        flapSound.play();
    }

    function createPipe() {
        const topPipe = document.createElement("div");
        const bottomPipe = document.createElement("div");

        topPipe.classList.add("pipe");
        bottomPipe.classList.add("pipe");

        const topHeight = Math.random() * 300 + 50;

        topPipe.style.height = topHeight + "px";
        topPipe.style.top = "0px";
        topPipe.style.left = window.innerWidth + "px";

        bottomPipe.style.height = (window.innerHeight - topHeight - gap) + "px";
        bottomPipe.style.bottom = "0px";
        bottomPipe.style.left = window.innerWidth + "px";

        gameArea.appendChild(topPipe);
        gameArea.appendChild(bottomPipe);

        pipes.push({ top: topPipe, bottom: bottomPipe, x: window.innerWidth });
    }

    function updatePipes() {
        pipes.forEach((pipe, index) => {
            pipe.x -= pipeSpeed;
            pipe.top.style.left = pipe.x + "px";
            pipe.bottom.style.left = pipe.x + "px";

            if (pipe.x + 80 < 0) {
                pipe.top.remove();
                pipe.bottom.remove();
                pipes.splice(index, 1);
                score++;
                scoreSound.play();
                scoreDisplay.textContent = score;
            }
        });
    }

    function detectCollision() {
        const birdRect = bird.getBoundingClientRect();
        if (birdRect.top <= 0 || birdRect.bottom >= window.innerHeight) return true;

        for (const pipe of pipes) {
            const t = pipe.top.getBoundingClientRect();
            const b = pipe.bottom.getBoundingClientRect();

            if (
                birdRect.left < t.right &&
                birdRect.right > t.left &&
                birdRect.top < t.bottom
            ) return true;

            if (
                birdRect.left < b.right &&
                birdRect.right > b.left &&
                birdRect.bottom > b.top
            ) return true;
        }
        return false;
    }

    function loop() {
        if (gameOver) return;

        birdSpeed += gravity;
        birdY += birdSpeed;
        bird.style.top = birdY + "px";

        updatePipes();

        if (detectCollision()) {
            dieSound.play();
            music.pause();
            gameOver = true;
            alert("Game Over! Score: " + score);
            location.reload();
        }

        requestAnimationFrame(loop);
    }

    // Touch / Click to flap
    gameArea.addEventListener("click", () => {
        startGame();
    });

    // Pipe generator
    setInterval(() => {
        if (!gameOver && started) createPipe();
    }, 1700);

    loop();
</script></body>
</html>
